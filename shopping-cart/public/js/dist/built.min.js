angular.module("app.controllers",[]),angular.module("app.models",[]);var app=angular.module("shopping-cart",["app.controllers","app.models","ui.router","ui.bootstrap","ngStorage"]).run(function(t){t.test=new Date});app.value("Configurations",{server:"http://localhost:3000/api/"}),app.config(function(t,o){o.otherwise("/"),t.state("home",{url:"/",templateUrl:"partials/home/home.html",controller:"HomeCtrl"}).decorator("$uiViewScroll",function(){})}),angular.module("app.controllers").controller("HomeCtrl",["$scope","$rootScope","Services",function(t,o,r){t.init=function(n){var n=o.shoppingCart;r.products.getAll(n).success(function(o){t.products=o.results})},t.$on("deleteProductShoppingCart",function(){t.init()}),t.init(),t.addProduct=function(n){var e=1;r.shoppingCart.postProduct(e,n).success(function(r){var e=o.shoppingCart||[];e.push(n),t.init(e),o.$broadcast("addProductShoppingCart",r)})}}]),angular.module("app.controllers").controller("MainCtrl",["$scope","$rootScope",function(t,o){o.globals={},o.shoppingCart=[],o.$on("$stateChangeSuccess",function(){document.body.scrollTop=document.documentElement.scrollTop=0})}]),app.factory("Services",["$http","$rootScope","Configurations",function(t,o,r){var n=r.server;return{products:{getAll:function(o){return t.get(n+"products",{params:{noProduct:o}})}},shoppingCart:{getProducts:function(o){return t.get(n+"cart/"+o)},postProduct:function(o,r){return t.post(n+"cart/"+o,{product:r})},deleteProduct:function(o,r){return t.delete(n+"cart/"+o+"/products/"+r)}}}}]),angular.module("app.controllers").controller("ShoppingCartCtrl",["$scope","$rootScope","$timeout","Services",function(t,o,r,n){t.init=function(){var r=1;n.shoppingCart.getProducts(r).success(function(r){t.products=r.products||[];var n=0;t.products.forEach(function(t){n+=t.price}),t.total=n;var e=t.products||[],c=[];o.shoppingCart=e.filter(function(t){c.push(t._id)}),o.shoppingCart=c})},t.init(),t.$on("addProductShoppingCart",function(){t.init()}),t.deleteProduct=function(r){var e=1;n.shoppingCart.deleteProduct(e,r).success(function(n){var e=o.shoppingCart.filter(function(t){return r!=t});o.shoppingCart=e,t.init(),o.$broadcast("deleteProductShoppingCart",n)})}}]);